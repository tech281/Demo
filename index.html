<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telelenker AI Support Simulation</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .simulation-box {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
        }
        .disclaimer {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-weight: 500;
            border: 1px solid #ffeeba;
        }
        h2 {
            color: #333;
            margin-bottom: 10px;
        }
        .sub {
            color: #666;
            margin-bottom: 25px;
        }
        .phone {
            background: #f0f0f0;
            border-radius: 40px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #ccc;
        }
        .dial-btn {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            margin: 20px 0;
            transition: background 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .dial-btn:hover {
            background: #45a049;
        }
        .dial-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .call-status {
            background: #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            min-height: 80px;
            text-align: left;
            font-size: 16px;
            border-left: 4px solid #007bff;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        .option-btn {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s;
            flex: 1 0 120px;
        }
        .option-btn:hover {
            background: #0056b3;
        }
        .option-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .order-input {
            margin: 15px 0;
        }
        .order-input input {
            padding: 10px;
            width: 200px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .language-selector {
            margin: 15px 0;
        }
        .lang-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            margin: 0 5px;
            cursor: pointer;
        }
        .lang-btn.active {
            background: #28a745;
        }
        footer {
            margin-top: 20px;
            color: #888;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="simulation-box">
        <div class="disclaimer">
            âš ï¸ ÛŒÛ Ø§ÛŒÚ© Ø³ÛŒÙ…ÙˆÙ„ÛŒØ´Ù† ÛÛ’Û” Ø¨Ø§ÛÙ…ÛŒ Ø±Ø¶Ø§Ù…Ù†Ø¯ÛŒ Ø³Û’ Ø§Ø³ Ù…ÛŒÚº ØªØ±Ø§Ù…ÛŒÙ… Ú©ÛŒ Ø¬Ø§ Ø³Ú©ØªÛŒ ÛÛŒÚºÛ”<br>
            âš ï¸ This is a simulation. The system can be customized by mutual agreement.
        </div>
        
        <h2>ğŸ“ Telelenker AI Support</h2>
        <div class="sub">Ú©Ø§Ù„ Ø³ÛŒÙ†Ù¹Ø± Ø³ÛŒÙ…ÙˆÙ„ÛŒØ´Ù†</div>
        
        <div class="phone">
            <div class="language-selector">
                <button class="lang-btn active" onclick="setLanguage('en')">English</button>
                <button class="lang-btn" onclick="setLanguage('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
            </div>
            
            <button class="dial-btn" id="dialBtn" onclick="startCall()">ğŸ“± ÚˆØ§Ø¦Ù„ Ú©Ø±ÛŒÚº / Dial</button>
            
            <div class="call-status" id="callStatus">
                <span id="statusText">ÚˆØ§Ø¦Ù„ Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚº... / Press dial to start...</span>
                <div id="aiResponse" style="margin-top:10px; font-weight:500;"></div>
            </div>
            
            <div id="interactionArea"></div>
        </div>
        
        <footer>
            Telelenker Â· Ù¾Ø§Ú©Ø³ØªØ§Ù† Â· 2025
        </footer>
    </div>

    <script>
        let currentLanguage = 'en';
        let callActive = false;
        let currentStep = 'welcome';
        let synth = window.speechSynthesis;
        let utterance = null;

        // Ø²Ø¨Ø§Ù† ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº
        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            if (lang === 'en') {
                document.querySelectorAll('.lang-btn')[0].classList.add('active');
            } else {
                document.querySelectorAll('.lang-btn')[1].classList.add('active');
            }
            // Ø§Ú¯Ø± Ú©Ø§Ù„ Ø¬Ø§Ø±ÛŒ ÛÙˆ ØªÙˆ Ø²Ø¨Ø§Ù† ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±Ù†Û’ Ù¾Ø± Ù¾ÛŒØºØ§Ù…
            if (callActive) {
                speak(getMessage('language_changed'));
                updateStatus(getMessage('language_changed'));
            }
        }

        // ØªÙ…Ø§Ù… Ù¾ÛŒØºØ§Ù…Ø§Øª Ú©ÛŒ ÙÛØ±Ø³Øª (Ø§Ù†Ú¯Ø±ÛŒØ²ÛŒ / Ø¹Ø±Ø¨ÛŒ)
        const messages = {
            en: {
                welcome: "Welcome to Al Amanah Customer Support. This is a simulation of Telelenker's AI system.",
                language_changed: "Language changed to English.",
                press_dial: "Press the dial button to start.",
                select_language: "For English, press 1. For Arabic, press 2.",
                select_purpose: "For order information, press 1. For promotions, press 2. To speak with a representative, press 3. For payment information, press 4.",
                enter_order: "Please enter your order number using the keypad below.",
                order_info: "Your order #ORDER is being processed and will be delivered tomorrow. Thank you.",
                promotion_info: "Our current promotion: 20% off on all rice products this week!",
                payment_info: "For payment inquiries, please contact our billing department. In this simulation, we'll have a representative call you back.",
                busy: "All our lines are currently busy. A representative will contact you shortly. Thank you for your patience.",
                invalid_option: "Invalid option. Please try again.",
                thanks: "Thank you for calling. Goodbye!",
                press_keys: "Press the keys below to simulate DTMF."
            },
            ar: {
                welcome: "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ø¯Ø¹Ù… Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø£Ù…Ø§Ù†Ø©. Ù‡Ø°Ù‡ Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù†Ø¸Ø§Ù… Telelenker Ø§Ù„Ø°ÙƒÙŠ.",
                language_changed: "ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.",
                press_dial: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù„Ø¨Ø¯Ø¡.",
                select_language: "Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ Ø§Ø¶ØºØ· 1. Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ø¶ØºØ· 2.",
                select_purpose: "Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨ØŒ Ø§Ø¶ØºØ· 1. Ù„Ù„Ø¹Ø±ÙˆØ¶ØŒ Ø§Ø¶ØºØ· 2. Ù„Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ù…Ù…Ø«Ù„ØŒ Ø§Ø¶ØºØ· 3. Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹ØŒ Ø§Ø¶ØºØ· 4.",
                enter_order: "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø£Ø¯Ù†Ø§Ù‡.",
                order_info: "Ø·Ù„Ø¨Ùƒ Ø±Ù‚Ù… #ORDER Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØ³ÙŠØªÙ… ØªÙˆØµÙŠÙ„Ù‡ ØºØ¯Ù‹Ø§. Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ.",
                promotion_info: "Ø¹Ø±Ø¶Ù†Ø§ Ø§Ù„Ø­Ø§Ù„ÙŠ: Ø®ØµÙ… 20Ùª Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø±Ø² Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹!",
                payment_info: "Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø³Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ø¯ÙŠÙ†Ø§. ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©ØŒ Ø³ÙŠØªØµÙ„ Ø¨Ùƒ Ù…Ù…Ø«Ù„ Ù‚Ø±ÙŠØ¨Ù‹Ø§.",
                busy: "Ø¬Ù…ÙŠØ¹ Ø®Ø·ÙˆØ·Ù†Ø§ Ù…Ø´ØºÙˆÙ„Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø³ÙŠØªØµÙ„ Ø¨Ùƒ Ù…Ù…Ø«Ù„ Ù‚Ø±ÙŠØ¨Ù‹Ø§. Ø´ÙƒØ±Ù‹Ø§ Ù„ØµØ¨Ø±Ùƒ.",
                invalid_option: "Ø®ÙŠØ§Ø± ØºÙŠØ± ØµØ§Ù„Ø­. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
                thanks: "Ø´ÙƒØ±Ø§ Ù„Ø§ØªØµØ§Ù„Ùƒ. Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ø©!",
                press_keys: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¯Ù†Ø§Ù‡ Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø§ØªØµØ§Ù„."
            }
        };

        function getMessage(key, replaceOrder = '') {
            let msg = messages[currentLanguage][key] || messages['en'][key];
            if (replaceOrder) msg = msg.replace('#ORDER', replaceOrder);
            return msg;
        }

        // Ù…ØªÙ† Ú©Ùˆ Ø¢ÙˆØ§Ø² Ø¯ÛŒÚº (Speech)
        function speak(text, lang = null) {
            if (!synth) return;
            // ØªÙ‚Ø±ÛŒØ± Ø±ÙˆÚ©ÛŒÚº Ø§Ú¯Ø± Ù¾ÛÙ„Û’ Ø³Û’ Ú†Ù„ Ø±ÛÛŒ ÛÙˆ
            if (utterance && synth.speaking) {
                synth.cancel();
            }
            utterance = new SpeechSynthesisUtterance(text);
            // Ø²Ø¨Ø§Ù† Ú©Ø§ ØªØ¹ÛŒÙ† (Ø¹Ø±Ø¨ÛŒ Ú©Û’ Ù„ÛŒÛ’ Ù…Ø®ØµÙˆØµ Ø¢ÙˆØ§Ø²)
            if (currentLanguage === 'ar' || lang === 'ar') {
                utterance.lang = 'ar-SA';
            } else {
                utterance.lang = 'en-US';
            }
            // Ø¢ÙˆØ§Ø² Ú©ÛŒ Ø±ÙØªØ§Ø± Ø§ÙˆØ± Ù„ÛØ¬Û
            utterance.rate = 0.9;
            utterance.pitch = 1;
            synth.speak(utterance);
        }

        // Ø§Ø³Ù¹ÛŒÙ¹Ø³ Ø¨Ø§Ú©Ø³ Ú©Ùˆ Ø§Ù¾ ÚˆÛŒÙ¹ Ú©Ø±ÛŒÚº
        function updateStatus(text, aiMsg = '') {
            document.getElementById('statusText').innerText = text;
            if (aiMsg) {
                document.getElementById('aiResponse').innerHTML = 'ğŸ¤– AI: ' + aiMsg;
            } else {
                document.getElementById('aiResponse').innerHTML = '';
            }
        }

        // Ø§Ù†Ù¹Ø±Ø§ÛŒÚ©Ø´Ù† Ø§ÛŒØ±ÛŒØ§ Ú©Ùˆ ØµØ§Ù Ú©Ø±ÛŒÚº
        function clearInteraction() {
            document.getElementById('interactionArea').innerHTML = '';
        }

        // Ú©Ø§Ù„ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº
        function startCall() {
            callActive = true;
            currentStep = 'welcome';
            document.getElementById('dialBtn').disabled = true;
            clearInteraction();

            // Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ú©ÛÛŒÚº
            let welcomeMsg = getMessage('welcome');
            speak(welcomeMsg);
            updateStatus('ğŸ“ Ú©Ø§Ù„ Ø¬Ø§Ø±ÛŒ... / Call in progress...', welcomeMsg);

            // ØªÚ¾ÙˆÚ‘ÛŒ Ø¯ÛŒØ± Ø¨Ø¹Ø¯ Ø²Ø¨Ø§Ù† Ù…Ù†ØªØ®Ø¨ Ú©Ø±Ù†Û’ Ú©Ø§ Ú©ÛÛŒÚº
            setTimeout(() => {
                if (!callActive) return;
                let langPrompt = getMessage('select_language');
                speak(langPrompt);
                updateStatus('ğŸ—£ï¸ AI Ø¨ÙˆÙ„ Ø±ÛØ§ ÛÛ’...', langPrompt);
                currentStep = 'language_selection';
                showLanguageOptions();
            }, 3000);
        }

        // Ø²Ø¨Ø§Ù† Ù…Ù†ØªØ®Ø¨ Ú©Ø±Ù†Û’ Ú©Û’ Ø¨Ù¹Ù† Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº
        function showLanguageOptions() {
            let area = document.getElementById('interactionArea');
            area.innerHTML = `
                <div class="options">
                    <button class="option-btn" onclick="selectLanguage('en')">1ï¸âƒ£ English</button>
                    <button class="option-btn" onclick="selectLanguage('ar')">2ï¸âƒ£ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                </div>
                <p style="color:#666;">${getMessage('press_keys')}</p>
            `;
        }

        // Ø²Ø¨Ø§Ù† Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº (ØµØ§Ø±Ù Ù†Û’ Ø¨Ù¹Ù† Ø¯Ø¨Ø§ÛŒØ§)
        function selectLanguage(lang) {
            if (!callActive) return;
            setLanguage(lang);
            let confirmMsg = lang === 'en' ? "You have selected English." : "Ù„Ù‚Ø¯ Ø§Ø®ØªØ±Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.";
            speak(confirmMsg);
            updateStatus('', confirmMsg);
            
            // Ø§Ú¯Ù„Ø§ Ù…Ø±Ø­Ù„Û: Ù…Ù‚ØµØ¯ Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨
            setTimeout(() => {
                if (!callActive) return;
                let purposePrompt = getMessage('select_purpose');
                speak(purposePrompt);
                updateStatus('', purposePrompt);
                currentStep = 'purpose_selection';
                showPurposeOptions();
            }, 2000);
        }

        // Ù…Ù‚ØµØ¯ Ú©Û’ Ø¨Ù¹Ù† Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº
        function showPurposeOptions() {
            let area = document.getElementById('interactionArea');
            area.innerHTML = `
                <div class="options">
                    <button class="option-btn" onclick="selectPurpose('order')">1ï¸âƒ£ ${currentLanguage === 'en' ? 'Order Info' : 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨'}</button>
                    <button class="option-btn" onclick="selectPurpose('promo')">2ï¸âƒ£ ${currentLanguage === 'en' ? 'Promotions' : 'Ø§Ù„Ø¹Ø±ÙˆØ¶'}</button>
                    <button class="option-btn" onclick="selectPurpose('rep')">3ï¸âƒ£ ${currentLanguage === 'en' ? 'Speak to Rep' : 'Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ù…Ù…Ø«Ù„'}</button>
                    <button class="option-btn" onclick="selectPurpose('payment')">4ï¸âƒ£ ${currentLanguage === 'en' ? 'Payment Info' : 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹'}</button>
                </div>
                <p style="color:#666;">${getMessage('press_keys')}</p>
            `;
        }

        // ØµØ§Ø±Ù Ù†Û’ Ù…Ù‚ØµØ¯ Ù…Ù†ØªØ®Ø¨ Ú©ÛŒØ§
        function selectPurpose(purpose) {
            if (!callActive) return;
            clearInteraction();

            if (purpose === 'order') {
                let enterMsg = getMessage('enter_order');
                speak(enterMsg);
                updateStatus('', enterMsg);
                currentStep = 'order_entry';
                showOrderInput();
            }
            else if (purpose === 'promo') {
                let promoMsg = getMessage('promotion_info');
                speak(promoMsg);
                updateStatus('', promoMsg);
                // ÙˆØ§Ù¾Ø³ Ø¢ØºØ§Ø² Ù¾Ø± Ø¬Ø§Ù†Û’ Ú©Ø§ Ø¢Ù¾Ø´Ù†
                setTimeout(() => {
                    if (!callActive) return;
                    let againMsg = currentLanguage === 'en' ? "To return to main menu, press 9. To end call, press 0." : "Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ø§Ø¶ØºØ· 9. Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©ØŒ Ø§Ø¶ØºØ· 0.";
                    speak(againMsg);
                    updateStatus('', againMsg);
                    showEndOptions();
                }, 4000);
            }
            else if (purpose === 'rep') {
                let busyMsg = getMessage('busy');
                speak(busyMsg);
                updateStatus('', busyMsg);
                // ØªÚ¾ÙˆÚ‘ÛŒ Ø¯ÛŒØ± Ø¨Ø¹Ø¯ Ú©Ø§Ù„ Ø®ØªÙ… Ú©Ø± Ø¯ÛŒÚº
                setTimeout(() => {
                    if (!callActive) return;
                    endCall();
                }, 4000);
            }
            else if (purpose === 'payment') {
                let paymentMsg = getMessage('payment_info');
                speak(paymentMsg);
                updateStatus('', paymentMsg);
                setTimeout(() => {
                    if (!callActive) return;
                    let againMsg = currentLanguage === 'en' ? "To return to main menu, press 9. To end call, press 0." : "Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ø§Ø¶ØºØ· 9. Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©ØŒ Ø§Ø¶ØºØ· 0.";
                    speak(againMsg);
                    updateStatus('', againMsg);
                    showEndOptions();
                }, 4000);
            }
        }

        // Ø¢Ø±ÚˆØ± Ù†Ù…Ø¨Ø± Ø¯Ø§Ø®Ù„ Ú©Ø±Ù†Û’ Ú©Ø§ Ø§Ù† Ù¾Ù¹
        function showOrderInput() {
            let area = document.getElementById('interactionArea');
            area.innerHTML = `
                <div class="order-input">
                    <input type="text" id="orderNumber" placeholder="e.g., 12345" maxlength="10">
                    <button class="option-btn" onclick="submitOrder()">${currentLanguage === 'en' ? 'Submit' : 'Ø¥Ø±Ø³Ø§Ù„'}</button>
                </div>
            `;
        }

        // Ø¢Ø±ÚˆØ± Ù†Ù…Ø¨Ø± Ø¬Ù…Ø¹ Ú©Ø±ÙˆØ§Ø¦ÛŒÚº
        function submitOrder() {
            let order = document.getElementById('orderNumber').value.trim();
            if (!order) order = "12345"; // ÚˆÛŒÙØ§Ù„Ù¹
            let orderMsg = getMessage('order_info', order);
            speak(orderMsg);
            updateStatus('', orderMsg);
            clearInteraction();

            // ÙˆØ§Ù¾Ø³ Ø¢ØºØ§Ø² Ù¾Ø± Ø¬Ø§Ù†Û’ Ú©Ø§ Ø¢Ù¾Ø´Ù†
            setTimeout(() => {
                if (!callActive) return;
                let againMsg = currentLanguage === 'en' ? "To return to main menu, press 9. To end call, press 0." : "Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ø§Ø¶ØºØ· 9. Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©ØŒ Ø§Ø¶ØºØ· 0.";
                speak(againMsg);
                updateStatus('', againMsg);
                showEndOptions();
            }, 4000);
        }

        // Ø§Ø®ØªØªØ§Ù…ÛŒ Ø§Ø®ØªÛŒØ§Ø±Ø§Øª (Ø¯ÙˆØ¨Ø§Ø±Û Ù…ÛŒÙ†Ùˆ ÛŒØ§ Ú©Ø§Ù„ Ø®ØªÙ…)
        function showEndOptions() {
            let area = document.getElementById('interactionArea');
            area.innerHTML = `
                <div class="options">
                    <button class="option-btn" onclick="restartCall()">9ï¸âƒ£ ${currentLanguage === 'en' ? 'Main Menu' : 'Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'}</button>
                    <button class="option-btn" onclick="endCall()">0ï¸âƒ£ ${currentLanguage === 'en' ? 'End Call' : 'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©'}</button>
                </div>
            `;
        }

        // Ø¯ÙˆØ¨Ø§Ø±Û Ø´Ø±ÙˆØ¹ (Ù…ÛŒÙ†Ùˆ)
        function restartCall() {
            if (!callActive) return;
            clearInteraction();
            let restartMsg = currentLanguage === 'en' ? "Returning to main menu." : "Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.";
            speak(restartMsg);
            updateStatus('', restartMsg);
            setTimeout(() => {
                if (!callActive) return;
                let purposePrompt = getMessage('select_purpose');
                speak(purposePrompt);
                updateStatus('', purposePrompt);
                currentStep = 'purpose_selection';
                showPurposeOptions();
            }, 2000);
        }

        // Ú©Ø§Ù„ Ø®ØªÙ… Ú©Ø±ÛŒÚº
        function endCall() {
            if (!callActive) return;
            let thanksMsg = getMessage('thanks');
            speak(thanksMsg);
            updateStatus('ğŸ“ Ú©Ø§Ù„ Ø®ØªÙ… / Call ended', thanksMsg);
            callActive = false;
            currentStep = 'ended';
            document.getElementById('dialBtn').disabled = false;
            clearInteraction();
        }

        // Ø§Ú¯Ø± ØµØ§Ø±Ù Ù†Û’ ØºÙ„Ø· Ø¨Ù¹Ù† Ø¯Ø¨Ø§ÛŒØ§ (Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ ÙˆÙ‚Øª)
        function invalidOption() {
            if (!callActive) return;
            let invalidMsg = getMessage('invalid_option');
            speak(invalidMsg);
            updateStatus('', invalidMsg);
        }

        // ÚˆØ§Ø¦Ù„ Ù¾ÛŒÚˆ Ø³Ù…ÙˆÙ„ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) - ÙÛŒ Ø§Ù„Ø­Ø§Ù„ Ø¶Ø±ÙˆØ±Øª Ù†ÛÛŒÚº
        window.onload = function() {
            // ÛŒÙ‚ÛŒÙ†ÛŒ Ø¨Ù†Ø§Ø¦ÛŒÚº Ú©Û Ú©ÙˆØ¦ÛŒ Ù¾Ø±Ø§Ù†ÛŒ ØªÙ‚Ø±ÛŒØ± Ù†Û Ú†Ù„ Ø±ÛÛŒ ÛÙˆ
            if (synth.speaking) synth.cancel();
        };
    </script>
</body>
  </html>
